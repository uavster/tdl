/* 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴 
   Include file for 3D universe rendering functions
   컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴 */
#ifndef _RENDER_INCLUDED_
#define _RENDER_INCLUDED_

#include <sli.h>

#ifdef __cplusplus
  extern "C" {
#endif

// Render methodes
#define RENDER_LINE  0
#define RENDER_SOLID 1

// Object types for searches
#define MESH_TYPE   0
#define CAMERA_TYPE 1
#define LIGHT_TYPE  2

// Face culling types
#define BACK_FACE_CULLED    1
#define FRONT_FACE_CULLED   2

/*
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
; Renders the 3D world
;
; INPUT : EAX -> RENDERWORLD structure
;         EBX -> Destination SLI
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*/
void RenderUniverse(RENDERWORLD *,SLI *);
#pragma aux RenderUniverse "*" parm   [eax] [ebx] \
                             modify [eax ebx ecx edx esi edi ebp];

/*
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
; Gets a pointer to default camera
;
; OUTPUT : EAX -> RENDERCAMERA structure of default camera
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*/
RENDERCAMERA *GetActiveCamera();
#pragma aux GetActiveCamera "*" modify [eax ebx ecx edx esi edi ebp] \
                                value  [eax];

/*
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
; Sets the current active camera
;
; INPUT : EAX -> RENDERCAMERA
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*/
void SetActiveCamera(RENDERCAMERA *);
#pragma aux SetActiveCamera "*" parm   [eax] \
                             modify [eax ebx ecx edx esi edi ebp] \

/*
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
; Gets the pointer to an object into the world with the given name
;
; INPUT  : EAX -> Mesh name
;          EBX -> RENDERWORLD
;          ECX = Object type
;
; OUTPUT : CF = 0 if ok
;               EAX -> World object
;          CF = 1 if object not found
;               EAX = NULL
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*/
void *GetObjectByName(char *,RENDERWORLD *,int);
#pragma aux GetObjectByName "*" parm   [eax] [ebx] [ecx] \
                             modify [eax ebx ecx edx esi edi ebp] \
                             value  [eax];

/*
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
; Sets the position of the camera from the world reference system
;
; INTPUT -> EAX = float X
;           EBX = float Y
;           ECX = float Z
;           EDX -> RENDERCAMERA or NULL if Current Camera
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*/
void SetCameraPos(float,float,float,RENDERCAMERA *);
#pragma aux SetCameraPos "*" parm   [eax] [ebx] [ecx] [edx] \
                             modify [eax ebx ecx edx esi edi ebp];

/*
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
; Sets the orientation of the camera from the world reference system
;
; INPUT : EAX = float ALPHA
;         EBX = float BETA
;         ECX = float GAMMA
;         EDX -> RENDERCAMERA or NULL if Current Camera
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*/
void SetCameraOrientation(float alpha, float beta, float gamma, RENDERCAMERA *camera);
#pragma aux SetCamerOrientation "*" parm   [eax] [ebx] [ecx] [edx] \
                             modify [eax ebx ecx edx esi edi ebp];

/*
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
; Gets the orientation of the camera from the world reference system
;
; INPUT :  EAX -> RENDERCAMERA or NULL if Current Camera
;
; OUTPUT : EAX = float ALPHA
;          EBX = float BETA
;          ECX = float GAMMA
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*/

/*
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
; Points the camera to a target point
;
; INPUT : EAX = float target X
;         EBX = float target Y
;         ECX = float target Z
;         EDX -> RENDERCAMERA or NULL if Current Camera
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*/
void SetCameraTarget(float,float,float,RENDERCAMERA *);
#pragma aux SetCameraTarget "*" parm   [eax] [ebx] [ecx] [edx] \
                             modify [eax ebx ecx edx esi edi ebp];

/*
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
; Sets a light position
;
; INPUT : EAX -> RENDERLIGHT
;         st0 = Float X
;         st1 = Float Y
;         st2 = Float Z
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*/
void SetLightPos(float,float,float,RENDERLIGHT *);
#pragma aux SetLightPos "*" parm   [8087] [8087] [8087] [eax] \
                             modify [eax];

/*
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
; Sets a light target vector
;
; INPUT : EAX -> RENDERLIGHT
;         st0 = Float target X
;         st1 = Float target Y
;         st2 = Float target Z
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*/
void SetLightTarget(float,float,float,RENDERLIGHT *);
#pragma aux SetLightTarget "*" parm		[8087] [8087] [8087] [eax] \
										modify [eax];

/*
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
; Sets the color of the Lined Render in B:G:R:0 format
;
; INPUT : EAX = Color in B:G:R:0 format
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*/
void SetLinedRenderColor(int);
#pragma aux SetLinedRenderColor "*" parm   [eax] \
                                    modify [eax ebx ecx edx esi edi ebp];

/*
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
; Rotates a RENDERMESH
;
; INPUT : ST1 = Float ALPHA
;         ST0 = Float BETA
;         EDX -> RENDERMESH structure
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*/
void RotateMesh(float, float, RENDERMESH *);
#pragma aux RotateMesh "*" parm   [8087] [8087] [edx] \
                             modify [eax ebx ecx edx esi edi ebp];

/*
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
; Moves a mesh pivot
;
; INPUT : EAX = Float X
;         EBX = Float Y
;         ECX = Float Z
;         EDX -> RENDERMESH structure
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*/
void MoveMesh(float,float,float,RENDERMESH *);
#pragma aux MoveMesh "*" parm   [eax] [ebx] [ecx] [edx] \
                             modify [eax ebx ecx edx esi edi ebp];

/*
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
; Sets the current render methode
;
; INPUT : EAX = Render methode
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*/
void SetRenderMethode(int);
#pragma aux SetRenderMethode "*" parm   [eax] \
                             modify [eax ebx ecx edx esi edi ebp];

typedef struct {
	float	x;
	float	y;
} POINT2;

/*
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
; Project point on camera.
;
; INPUT  : EAX -> POINT2D where to store the point projection
; 		   ECX -> RENDERPOINT
;          EDX -> RENDERCAMERA
;
; OUTPUT : EAX -> POINT2D with the point projected on the camera plane
;컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
*/
const POINT2D *ProjectPointOnCamera(RENDERPOINT *, RENDERCAMERA *, POINT2D *);
#pragma aux ProjectPointOnCamera "*" parm   [ecx] [edx] [eax] \
                             modify [eax ebx ecx edx esi edi ebp 8087] \
							 value [eax];

#ifdef __cplusplus
  };
#endif

#endif
